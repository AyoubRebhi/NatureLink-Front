<div class="facebook-container">
  <!-- Post Form -->
  <app-post-form></app-post-form>

  <!-- Loading -->
  <div *ngIf="isLoading" class="loading-spinner">
    <div class="fb-spinner"></div>
  </div>

  <!-- Post List -->
  <div *ngIf="!isLoading" class="fb-post-list">
    <!-- No Posts -->
    <div *ngIf="posts.length === 0" class="fb-no-posts">
      <div class="fb-no-posts-icon">
        <i class="fas fa-newspaper"></i>
      </div>
      <p>Aucun post disponible</p>
    </div>

    <!-- Posts -->
    <div *ngFor="let post of posts" class="fb-post">
      <!-- Post Header -->
      <div class="fb-post-header">
        <img [src]="'http://localhost:9000/uploads/img.PNG'" class="fb-avatar" alt="Avatar">
        <div class="fb-post-user">
          <h4>{{ post.user.username }}</h4>
          <small class="fb-post-time">{{ formatDate(post.dateCreated) }} · <i class="fas fa-globe-europe"></i></small>
        </div>
        <div class="fb-post-options">
          <i class="fas fa-ellipsis-h"></i>
        </div>
      </div>

      <!-- Post Content -->
      <div class="fb-post-body">
        <p>{{ post.content }}</p>
        <!-- Post Image -->
        <div *ngIf="post.imageUrl" class="fb-post-image">
          <img [src]="post.imageUrl" alt="Image du post">
        </div>
      </div>

      <!-- Post Stats -->
      <div class="fb-post-stats">
        <div class="fb-reaction-count">
          <div class="fb-reaction-icons">
            <span class="fb-like-icon"><i class="fas fa-thumbs-up"></i></span>
            <span class="fb-love-icon"><i class="fas fa-heart"></i></span>
          </div>
          <span>120</span>
        </div>
        <div class="fb-comment-share-count">
          <span>45 commentaires</span>
          <span>12 partages</span>
        </div>
      </div>

      <!-- Post Actions -->
      <div class="fb-post-actions">
        <button class="fb-action-btn">
          <i class="far fa-thumbs-up"></i> J'aime
        </button>
        <button class="fb-action-btn">
          <i class="far fa-comment-alt"></i> Commenter
        </button>
        <button class="fb-action-btn">
          <i class="fas fa-share"></i> Partager
        </button>
      </div>

      <!-- Comments Section -->
      <div class="fb-comments-section">
        <!-- Comments List -->
        <div *ngFor="let comment of comments[post.id]" class="fb-comment">
          <img [src]="'http://localhost:9000/uploads/img.PNG'" class="fb-comment-avatar" alt="Avatar">
          
          <div class="fb-comment-content">
            <div class="fb-comment-header">
              <strong>{{ comment.user.username }}</strong>
              <div *ngIf="editingCommentId !== comment.id" class="fb-comment-actions">
                <button (click)="startEdit(comment)" class="fb-comment-action"><i class="far fa-edit"></i></button>
                <button (click)="comment.id ? deleteComment(post.id, comment.id) : null" class="fb-comment-action"><i class="far fa-trash-alt"></i></button>
              </div>
            </div>
            
            <div *ngIf="editingCommentId !== comment.id" class="fb-comment-text">
              {{ comment.content }}
            </div>
            
            <!-- Comment Edit Form -->
            <div *ngIf="editingCommentId === comment.id" class="fb-comment-edit">
              <input [(ngModel)]="editedCommentContent" class="fb-comment-edit-input" />
              <div class="fb-comment-edit-actions">
                <button (click)="cancelEdit()" class="fb-comment-edit-cancel">Annuler</button>
                <button (click)="updateComment(post.id, comment.id)" class="fb-comment-edit-save">Enregistrer</button>
              </div>
            </div>
            
            <div class="fb-comment-footer">
              <span class="fb-comment-like">J'aime</span>
              <span class="fb-comment-time">2 min</span>
            </div>
          </div>
        </div>

        <!-- Add Comment -->
        <div class="fb-add-comment">
          <img [src]="'http://localhost:9000/uploads/img.PNG'" class="fb-comment-avatar" alt="Avatar">
          <div class="fb-comment-input-container">
            <input [(ngModel)]="commentInputs[post.id]" 
                   placeholder="Écrivez un commentaire..." 
                   class="fb-comment-input" />
            <div class="fb-comment-options">
              <button class="fb-comment-option"><i class="far fa-smile"></i></button>
              <button class="fb-comment-option"><i class="fas fa-camera"></i></button>
              <button class="fb-comment-option"><i class="fas fa-gift"></i></button>
              <button (click)="addComment(post.id)" class="fb-comment-send">
                <i class="fas fa-paper-plane"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>