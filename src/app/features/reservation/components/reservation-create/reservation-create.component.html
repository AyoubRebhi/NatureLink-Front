<!-- Reservation Form Start -->
<div class="container py-5 mt-5 pt-5">
  <h2 class="text-center mb-4">Create Reservation</h2>
  <form #reservationForm="ngForm" (ngSubmit)="createReservation()" class="bg-white bg-opacity-75 p-4 rounded shadow-lg">
    <!-- Number of Clients -->
    <div class="form-group mb-3">
      <label for="numClients">Number of Clients:</label>
      <input
        type="number"
        id="numClients"
        [(ngModel)]="numClients"
        name="numClients"
        class="form-control"
        required
        min="1"
        (ngModelChange)="generateClientInputs()"
        placeholder="Enter the number of clients"
      />
      <div *ngIf="reservationForm.controls['numClients']?.invalid && reservationForm.controls['numClients']?.touched" class="text-danger">
        Please enter a valid number of clients (minimum 1).
      </div>
    </div>

    <!-- Client Names (dynamically generated) -->
    <div class="form-group mb-3" *ngFor="let clientName of clientNames; let i = index; trackBy: trackByIndex">
      <label for="clientName{{i}}">Client Name {{i + 1}}:</label>
      <input
        type="text"
        id="clientName{{i}}"
        [(ngModel)]="clientNames[i]"
        name="clientName{{i}}"
        class="form-control"
        required
        placeholder="Enter client name"
      />
      <div *ngIf="reservationForm.controls['clientName' + i]?.invalid && reservationForm.controls['clientName' + i]?.touched" class="text-danger">
        Client name is required.
      </div>
    </div>

    <!-- Date Debut (Start Date) -->
    <div class="form-group mb-3">
      <label for="dateDebut">Date Début:</label>
      <input
        type="date"
        id="dateDebut"
        [(ngModel)]="dateDebut"
        name="dateDebut"
        class="form-control"
        required
        [min]="today"
      />
      <div *ngIf="reservationForm.controls['dateDebut']?.invalid && reservationForm.controls['dateDebut']?.touched" class="text-danger">
        Please select a valid start date.
      </div>
    </div>

    <!-- Date Fin (End Date) -->
    <div class="form-group mb-3">
      <label for="dateFin">Date Fin:</label>
      <input
        type="date"
        id="dateFin"
        [(ngModel)]="dateFin"
        name="dateFin"
        class="form-control"
        required
        [min]="dateDebut || today"
      />
      <div *ngIf="reservationForm.controls['dateFin']?.invalid && reservationForm.controls['dateFin']?.touched" class="text-danger">
        Please select a valid end date.
      </div>
    </div>

    <!-- Statut (Status) -->
    <div class="form-group mb-3">
      <label for="statut">Statut:</label>
      <select
        id="statut"
        [(ngModel)]="selectedStatut"
        name="statut"
        class="form-control"
        required
      >
        <option *ngFor="let statut of statutOptions" [ngValue]="statut">{{ statut }}</option>
      </select>
      <div *ngIf="reservationForm.controls['statut']?.invalid && reservationForm.controls['statut']?.touched" class="text-danger">
        Please select a status.
      </div>
    </div>

    <!-- Number of Rooms (only for logement) -->
    <div *ngIf="logementId" class="form-group mb-3">
      <label for="numRooms">Number of Rooms:</label>
      <input
        type="number"
        id="numRooms"
        [(ngModel)]="numRooms"
        name="numRooms"
        class="form-control"
        required
        min="1"
        placeholder="Enter the number of rooms"
      />
      <div *ngIf="reservationForm.controls['numRooms']?.invalid && reservationForm.controls['numRooms']?.touched" class="text-danger">
        Please enter a valid number of rooms (minimum 1).
      </div>
    </div>

    <!-- Submit Button -->
    <div class="form-group text-center">
      <button type="submit" class="btn btn-primary" [disabled]="isLoading || reservationForm.invalid">
        <span *ngIf="isLoading" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
        {{ isLoading ? 'Ajout en cours...' : 'Ajouter la réservation' }}
      </button>
    </div>
  </form>

  <!-- Back Button -->
  <div class="form-group text-center mt-4">
    <button class="btn btn-secondary" (click)="goBackToList()">Back to Reservations List</button>
  </div>
</div>
<!-- Reservation Form End -->