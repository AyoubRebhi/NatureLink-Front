<div class="visit-front-container">
  <div class="search-section">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <div class="search-box">
            <input
              type="text"
              class="form-control"
              [(ngModel)]="searchTerm"
              (input)="filterVisits()"
              placeholder="Rechercher une visite, un monument ou un guide..."
            />
            <i class="ri-search-line search-icon"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container visit-list">
    <div class="row">
      <div *ngFor="let visit of filteredVisits" class="col-md-6 col-lg-4 mb-4">
        <div class="card h-100 shadow-sm">
          <img
            src="assets/images/visit-placeholder.jpg"
            class="card-img-top"
            alt="Image de la visite"
            onerror="this.src='assets/images/visit-placeholder.jpg'"
          >

          <div class="card-body d-flex flex-column">
            <h3 class="card-title">{{ visit.monument?.nom || visit.nomMonument || 'Monument inconnu' }}</h3>
            <p class="card-text text-muted">
              Guide :
              {{ visit.guide?.firstName + ' ' + visit.guide?.lastName || visit.nomGuide || 'Non assigné' }}
            </p>

            <ul class="visit-info list-unstyled">
              <li><i class="ri-calendar-line"></i> {{ visit.date | date: 'dd/MM/yyyy' }}</li>
              <li><i class="ri-time-line"></i> {{ visit.time }}</li>
              <li><i class="ri-hourglass-line"></i> {{ visit.duration }} min</li>
              <li><i class="ri-money-euro-circle-line"></i> {{ visit.price }} €</li>
            </ul>

            <div class="mt-auto text-center">
              <button
                class="btn btn-primary"
                [routerLink]="['/visit', visit.id]"
              >
                <i class="ri-eye-line"></i> Détails de la visite
              </button>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="filteredVisits.length === 0" class="col-12 text-center py-5">
        <div class="no-result">
          <i class="ri-route-line"></i>
          <h4>Aucune visite trouvée</h4>
          <p>Essayez un autre terme ou vérifiez votre saisie</p>
        </div>
      </div>
    </div>
  </div>
</div>
